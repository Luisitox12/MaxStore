<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>Productos</h1>
        
        <!-- Formulario para crear una nueva categoría -->
        <h2>Crear Nueva Categoría</h2>
        <form action="/categorias/crear" method="POST">
            <input type="text" name="nombre" placeholder="Nombre de la categoría" required>
            <button type="submit">Agregar Categoría</button>
        </form>

        <!-- Formulario para crear un nuevo producto -->
        <h2>Agregar Producto</h2>
        <form action="/productos/crear" method="POST">
            <input type="text" name="nombre" placeholder="Nombre del producto" required>
            <input type="number" name="precio" placeholder="Precio" required>
            <select name="categoria_id" required>
                <option value="">Selecciona una categoría</option>
                <% categorias.forEach(categoria => { %>
                    <option value="<%= categoria.id %>"><%= categoria.nombre %></option>
                <% }) %>
            </select>
            <button type="submit">Agregar Producto</button>
        </form>

        <ul>
            <% productos.forEach(producto => { %>
                <li>
                    <%= producto.nombre %> - $<%= producto.precio %> (Categoría: <%= producto.categoria_nombre || 'Sin categoría' %>)
                    <form action="/productos/eliminar/<%= producto.id %>" method="GET">
                        <button type="submit">Eliminar</button>
                    </form>
                </li>
            <% }) %>
        </ul>
    </div>
</body>
</html>